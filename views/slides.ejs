<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title><%= title %></title>
    <% links.forEach(function(link){ %>
        <% stylesheet(link) -%>
        <%- stylesheets %>
    <% }) %>
    <!-- Bootstrap -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet/less" type="text/css" href="/css/logoAnim.less">
	<script src="/js/less-1.3.1.min.js" type="text/javascript"></script>
    <!-- Websockets -->
    <script src="/socket.io/socket.io.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    
    <% if (mode === 'admin') { %>
    	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <% } %>

    
</head>

<body class="impress-not-supported">
    
     <div id="question" class="modal hide fade" style="pointer-events: auto;">
	<div class="modal-header" id="questionText">
	</div>
	<div class="modal-body">
	    <form>
		<fieldset id='answeroptions'>
		</fieldset>
	    </form>	
	</div>
	<div class="modal-footer">
	    <!--- Button for admin --->
	    <% if(mode === 'admin'){ %>
		<button class="btn btn-primary" data-dismiss="modal" id ="showanswers" onclick="show()" >Show answers</button>					
	    <!--- Button for viewer --->
	    <% } else if(mode ==="viewer"){ %>
		<button type="button" class="btn btn-primary"  data-toggle="button" id ="sendanswers" onclick="send()" >Done</button>
	    <% } %>
					
	</div>
    <div class="modal-footer">
        
    </div>
 </div>
     
     
     <div id="answer" class="modal hide fade" style="pointer-events: auto;">
	<div class="modal-header" id="answerText">
	</div>
	<div class="modal-body" id='answersolutions'>
	     <div id="Q1Correct" style="height: 200px;"></div>
	     <div id="q" style="height: 200px;"></div>
	</div>
	<div class="modal-footer">
	    <!--- Button for admin --->
	    <% if(mode === 'admin'){ %>
		<button class="btn btn-primary" data-dismiss="modal" id ="continue" onclick="nextslide()" >Continue Presentation</button>					
	    <% } %>
					
	</div>
    <div class="modal-footer">
        
    </div>
 </div>
     
     

    <% if (mode === 'admin') { %>
        <%  include slidesWelcome %>
    <% } else {%>
        <% include slidesWait %>
    <% } %>
   
    <%- partial(path) %>
    <script src="/js/impress-<%= mode %>.js"></script>
    <script src="/js/<%= mode %>.js"></script>
    <script>
        window.onload = function() {
        impress().init();
        $('#welcomeScreen').modal('show');
	
        connect(<%='\'' + host + '\''%>, <%=port %>, '<%= id %>');
        }
	
	var show=function() {
	    impress().next();
	}
	
	var send=function() {
	    var answers=[];
	    for (var i=0;i<$('#answeroptions').children().size()-1;i++) {
		if ($('#checkbox'+i).is(':checked')){
		    answers[i]=true;
		} else {
		    answers[i]=false;
		}
	    }
	    var myEvent = new CustomEvent("asq:submit", {
		"detail": {
		    "answers": answers
		}
	    });
	    document.dispatchEvent(myEvent);
	}
	
	var nextslide=function() {
	    impress().next();
	}
    </script>
</body>
</html>